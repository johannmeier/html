<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Simple template</title>
    <script src="js/dialog.js" defer></script>
</head>
<body>

<h1>Simple template</h1>

<div id="dialogHost">
    <template id="dialogTemplate" shadowrootmode="open">
        <dialog id="dialog" onclick="closeDialog.apply(this, arguments)">
            <form method="dialog">
                <button style="float: right" type="submit">x</button>
            </form>
            <div class="header">Header of dialog</div>
            <p class="content">Content of dialog</p>
            <div class="footer">footer of dialog</div>
        </dialog>
        <script>
            window.closeDialog = function (event) {
                let rect = event.target.getBoundingClientRect();
                if (rect.left > event.clientX ||
                    rect.right < event.clientX ||
                    rect.top > event.clientY ||
                    rect.bottom < event.clientY
                ) {
                    event.target.close();
                }
            }
        </script>
    </template>
</div>

<button type="button"
        onclick="window.showDialog({header: 'hello', content: 'Dies ist der neue Inhalt', footer: 'Unten'})">Show dialog
</button>

<script>
    window.showDialog = function (options) {
        const dialog = document.getElementById("dialogHost").shadowRoot.getElementById("dialog");

        if (options.header) {
            dialog.querySelector(".header").innerText = options.header;
        }
        if (options.content) {
            dialog.querySelector(".content").innerText = options.content;
        }
        if (options.footer) {
            dialog.querySelector(".footer").innerText = options.footer;
        }

        dialog.showModal();
    }

</script>

</body>
</html>
